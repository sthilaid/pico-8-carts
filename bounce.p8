pico-8 cartridge // http://www.pico-8.com
version 35
__lua__
balls={}
function make_ball() 
  return {x=rnd(128),
          y=rnd(128),
          vx=rnd(50)-25,
          vy=0,--rnd(100)-50,
          col=rnd(15),
          r=4,
          }
end

function _init() 
	for x=0,20 do 
	  add(balls, make_ball())
	end
end

gravity=10
elast=0.8
dt=1/30
function _update()
  if btnp(0) then
    for b in all(balls) do
      b.vx = -b.vx
    end
  end
  if btnp(1) then
    for b in all(balls) do
      gravity = -gravity
    end
  end
  for b in all(balls) do
    b.vy = b.vy + gravity*dt
    if b.x < b.r or b.x > 128-b.r then
      b.vx = -elast*b.vx
    end
    if b.y < b.r or b.y > 128-b.r then
      b.vy = -elast*b.vy
    end
    b.x = b.x + b.vx * dt
    b.y = b.y + b.vy * dt
  end
end

function _draw()
  cls(0)
  for b in all(balls) do
    circfill(b.x, b.y, b.r, b.col) 
  end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
